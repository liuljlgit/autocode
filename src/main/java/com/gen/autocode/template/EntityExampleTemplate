package com.gen.test.entity;

import org.springframework.util.CollectionUtils;
import java.util.*;
import java.math.*;

/**
 * ${entityName}Example
 * 注意:Criteria代表着一个大括号，里面有很多表达式
 * Criterion代表着一个表达式
 */
public class ${entityName}Example{

    private String orderByClause;
    private int index;
    private int pageSize;
    private List<Criteria> criterias;

    public Criteria createAndCriteria(){
        Criteria criteria = new Criteria();
        criteria.setOptStr("and");
        addCriteria(criteria);
        return criteria;
    }

    public Criteria createOrCriteria(){
            Criteria criteria = new Criteria();
            criteria.setOptStr("or");
            addCriteria(criteria);
            return criteria;
        }

    public Criteria createCriteria(){
        Criteria criteria = new Criteria();
        criteria.setOptStr("");
        addCriteria(criteria);
        return criteria;
    }

    public void addCriteria(Criteria criteria){
        if(CollectionUtils.isEmpty(criterias)){
            criterias = new ArrayList<>();
        }
        criterias.add(criteria);
    }


    /**
     * Criteria类,每个Criteria有多个Criterion表达式
     */
    public static class Criteria {

        /**
         * field comment:判断是否有值合法
         */
        public boolean isValid() {
            return criterions.size() > 0;
        }

        /**
         * field comment:一个Example有多个Criteria,
         */
        private List<Criterion> criterions;

        /**
         * field comment:类型,是and还是or 这个字段是为了两个表达式optStr CriteriaA optStr CriteriaB 如果是最前面一个Criteria,那么应该设置为""
         */
        private String optStr;

        /**
         * field comment:用来临时存储字符串"or" 或者 "and"
         */
        private String prefix = "";

        public Criteria clearPrefix(){
            setPrefix("");
            return (Criteria)this;
        }

        public Criteria or(){
            setPrefix("or");
            return (Criteria)this;
        }

        public Criteria and(){
            setPrefix("and");
            return (Criteria)this;
        }

        public void addCriterion(String condition) {
            if (condition == null) {
                throw new RuntimeException("Value for condition cannot be null");
            }
            if(CollectionUtils.isEmpty(criterions)){
                criterions = new ArrayList<>();
            }
            Criterion criterion = new Criterion();
            criterion.setCondition(condition);
            criterion.setNoValue(true);
            criterions.add(criterion);
        }

        public void addCriterion(String condition, Object value, String property) {
            if (value == null) {
                throw new RuntimeException("Value for " + property + " cannot be null");
            }
            if(CollectionUtils.isEmpty(criterions)){
                criterions = new ArrayList<>();
            }
            Criterion criterion = new Criterion();
            criterion.setCondition(condition);
            if(value instanceof Collection){
                criterion.setList(value);
                criterion.setListValue(true);
            }else{
                criterion.setValue1(value);
                criterion.setOneValue(true);
            }
            criterions.add(criterion);
        }

        public void addCriterion(String condition, Object value1, Object value2, String property) {
            if (value1 == null || value2 == null) {
                throw new RuntimeException("Between values for " + property + " cannot be null");
            }
            if(CollectionUtils.isEmpty(criterions)){
                criterions = new ArrayList<>();
            }
            Criterion criterion = new Criterion();
            criterion.setCondition(condition);
            criterion.setValue1(value1);
            criterion.setValue2(value2);
            criterion.setSecondValue(true);
        }

        //需进行以下操作判断：
        //IsNull、IsNotNull、EqualTo、NotEqualTo、GreaterThan、GreaterThanOrEqualTo、LessThan、LessThanOrEqualTo、Like、NotLike、In、NotIn、Between、NotBetween
        ${exampleSql}
        public List<Criterion> getCriterions() {
            return criterions;
        }

        public void setCriterions(List<Criterion> criterions) {
            this.criterions = criterions;
        }

        public String getOptStr() {
            return optStr;
        }

        public void setOptStr(String optStr) {
            this.optStr = optStr;
        }

        public String getPrefix() {
            return prefix;
        }

        public void setPrefix(String prefix) {
            this.prefix = prefix;
        }
    }

    /**
     * 表达式类
     */
    public static class Criterion {
        private String condition;
        private Object value1;
        private Object value2;
        private Object list;
        private boolean noValue;
        private boolean oneValue;
        private boolean secondValue;
        private boolean listValue;

        public String getCondition() {
            return condition;
        }

        public void setCondition(String condition) {
            this.condition = condition;
        }

        public Object getValue1() {
            return value1;
        }

        public void setValue1(Object value1) {
            this.value1 = value1;
        }

        public Object getValue2() {
            return value2;
        }

        public void setValue2(Object value2) {
            this.value2 = value2;
        }

        public Object getList() {
            return list;
        }

        public void setList(Object list) {
            this.list = list;
        }

        public boolean isNoValue() {
            return noValue;
        }

        public void setNoValue(boolean noValue) {
            this.noValue = noValue;
        }

        public boolean isOneValue() {
            return oneValue;
        }

        public void setOneValue(boolean oneValue) {
            this.oneValue = oneValue;
        }

        public boolean isSecondValue() {
            return secondValue;
        }

        public void setSecondValue(boolean secondValue) {
            this.secondValue = secondValue;
        }

        public boolean isListValue() {
            return listValue;
        }

        public void setListValue(boolean listValue) {
            this.listValue = listValue;
        }
    }

    public String getOrderByClause() {
        return orderByClause;
    }

    public void setOrderByClause(String orderByClause) {
        this.orderByClause = orderByClause;
    }

    public int getIndex() {
        return index;
    }

    public void setIndex(int index) {
        this.index = index;
    }

    public int getPageSize() {
        return pageSize;
    }

    public void setPageSize(int pageSize) {
        this.pageSize = pageSize;
    }

    public List<Criteria> getCriterias() {
        return criterias;
    }

    public void setCriterias(List<Criteria> criterias) {
        this.criterias = criterias;
    }

}

